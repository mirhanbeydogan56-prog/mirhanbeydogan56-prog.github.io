<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Durum Takip</title>
  <style>
    body{
      font-family:Inter,system-ui;
      margin:0;
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      background:linear-gradient(135deg,#0f172a,#1e293b,#334155);
      background-size:400% 400%;
      animation:bgmove 12s ease infinite;
    }
    @keyframes bgmove{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    .card{
      width:360px;
      background:rgba(255,255,255,0.12);
      padding:20px;
      border-radius:16px;
      backdrop-filter:blur(12px);
      box-shadow:0 8px 25px rgba(0,0,0,0.3);
      color:white;
    }
    h1{text-align:center;margin-bottom:14px;font-size:22px}
    input[type=password]{width:100%;padding:10px;font-size:15px;border-radius:8px;border:1px solid #ccc;margin-top:10px}
    button{width:100%;padding:10px;margin-top:12px;font-size:15px;border:0;border-radius:8px;background:#3b82f6;color:white;cursor:pointer}
    .status-box{margin-top:20px;font-size:20px;font-weight:600;text-align:center;padding:16px;border-radius:12px;background:rgba(255,255,255,0.15)}

    /* SLIDER TASARIMI */
    .slider-box{margin-top:20px;text-align:center}
    input[type=range]{width:100%;appearance:none;height:10px;border-radius:10px;background:linear-gradient(90deg,#ff7a7a,#ffb3b3);outline:none}
    input[type=range]::-webkit-slider-thumb{
      appearance:none;
      width:22px;height:22px;
      background:white;
      border-radius:50%;
      border:3px solid #ff7a7a;
    }
    #percent{font-size:28px;font-weight:700;margin-top:10px;color:#ffecec}
  </style>
</head>
<body>

<div class="card" id="loginCard">
  <h1>Durum Girişi</h1>
  <input id="pass" type="password" placeholder="Şifreyi girin" />
  <button id="loginBtn">Giriş Yap</button>
</div>

<div class="card" id="statusCard" style="display:none;">
  <h1 id="nameTitle"></h1>
  <div class="status-box" id="ownStatus"></div>

  <div class="slider-box">
    <h3>Kendi Durumun</h3>
    <input type="range" id="energySlider" min="0" max="100" value="50">
    <div id="percent">50%</div>
    <button id="saveBtn" style="background:#16a34a;margin-top:15px;">Kaydet</button>
  </div>

  <h3 style="margin-top:25px;">Diğer kişi</h3>
  <div class="status-box" id="otherStatus"></div>
</div>

<script>
  const PASSWORDS = { esma: "esma5685", mirhan: "mirhan5685" };

  if(!localStorage.getItem("durum_esma")) localStorage.setItem("durum_esma", "50");
  if(!localStorage.getItem("durum_mirhan")) localStorage.setItem("durum_mirhan", "50");

  const loginCard = document.getElementById("loginCard");
  const statusCard = document.getElementById("statusCard");
  const loginBtn = document.getElementById("loginBtn");

  loginBtn.addEventListener("click", () => {
    const p = document.getElementById("pass").value.trim();
    let user = null;
    if (p === PASSWORDS.esma) user = "esma";
    if (p === PASSWORDS.mirhan) user = "mirhan";
    if (!user) return alert("Şifre yanlış");
    window.currentUser = user;
    showStatus(user);
  });

  function showStatus(user){
    loginCard.style.display = "none";
    statusCard.style.display = "block";

    const nameTitle = document.getElementById("nameTitle");
    const ownStatus = document.getElementById("ownStatus");
    const otherStatus = document.getElementById("otherStatus");
    const slider = document.getElementById("energySlider");
    const percent = document.getElementById("percent");

    if(user === "esma"){
      nameTitle.textContent = "Esma'nın Durumu";
      slider.value = localStorage.getItem("durum_esma");
      percent.textContent = slider.value + "%";
      ownStatus.textContent = slider.value + "% enerji";
      otherStatus.textContent = localStorage.getItem("durum_mirhan") + "% enerji";
    }
    if(user === "mirhan"){
      nameTitle.textContent = "Mirhan'ın Durumu";
      slider.value = localStorage.getItem("durum_mirhan");
      percent.textContent = slider.value + "%";
      ownStatus.textContent = slider.value + "% enerji";
      otherStatus.textContent = localStorage.getItem("durum_esma") + "% enerji";
    }
  }

  document.getElementById("energySlider").addEventListener("input", e =>{
    document.getElementById("percent").textContent = e.target.value + "%";
  });

  document.getElementById("saveBtn").addEventListener("click", ()=>{
    const val = document.getElementById("energySlider").value;
    const user = window.currentUser;
    if(user === "esma") localStorage.setItem("durum_esma", val);
    if(user === "mirhan") localStorage.setItem("durum_mirhan", val);
    document.getElementById("ownStatus").textContent = val + "% enerji";
    alert("Durum güncellendi!");
  });
</script>

</body>
</html>
